enum ActivityEventType {
  create
  update
  delete
  restore
  archive
}

enum ActivityActorType {
  user
  system
}

enum ResourceType {
  user
  role
  organization
  item
  invoice
  customer
  supplier
  purchase_order
  sales_order
}





model ActivityLog {
  id               String   @id @default(uuid())

  organizationId   String
  resourceId       String
  resourceType     ResourceType

  event            ActivityEventType

  actorId          String?
  actorType        ActivityActorType @default(user)

  resourceSnapshot Json?
  changes          Json?

  createdAt        DateTime @default(now())

  // üî• Core feed (most important)
  @@index([organizationId, createdAt], name: "idx_activity_org_created")

  // üîç Resource history
  @@index([organizationId, resourceType, resourceId, createdAt],name: "idx_activity_org_resource")

  // üë§ Actor activity
  @@index([organizationId, actorId, createdAt],name: "idx_activity_org_actor")

  // üßæ Event filtering
  @@index([organizationId, event, createdAt],name: "idx_activity_org_event")
}

